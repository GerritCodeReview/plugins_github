{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "96fa9dc5_e1640d99",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 14,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-09T16:19:30Z",
      "side": 1,
      "message": "Does this also covers logging in using using git client? In the other words, will the groups be refreshed on HTTP fetch and push?\n\nAlso this is potentially creating inconsistency between git HTTP and SSH protocols. As with HTTP, the groups _could be_ refreshed, but they definitely won\u0027t be over SSH. This means that user will have old permissions until they interact with the server over HTTP. This probably is not an issue when permissions are granted, but when they are removed user can still access repositories over SSH.\n\nBTW. GerritHub.io supports both protocols.",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 64
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2121c159_50625775",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 14,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T16:46:52Z",
      "side": 1,
      "message": "\u003e Does this also covers logging in using using git client? In the other words, will the groups be refreshed on HTTP fetch and push?\n\nNo, and you should not do groups refresh in that case.\nGitHub API are very slow and subject to throttling and that would certainly cause the user to be kicked out very soon.\n\n\u003e Also this is potentially creating inconsistency between git HTTP and SSH protocols. As with HTTP, the groups _could be_ refreshed, but they definitely won\u0027t be over SSH. This means that user will have old permissions until they interact with the server over HTTP. This probably is not an issue when permissions are granted, but when they are removed user can still access repositories over SSH.\n\nNo, this is only done for interactive logins, let me clarify on the commit message.",
      "parentUuid": "96fa9dc5_e1640d99",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 14,
        "endChar": 64
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d136adf_c0a469e6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-09T16:19:30Z",
      "side": 1,
      "message": "nit: I find this bit inconsistent that you refer to GerritHub.io in line 10, but here use _Gerrit Code Review_. I\u0027d rather use _Gerrit Code Review_ everywhere.",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 34
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84eea98f_81ebd76c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T16:54:37Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "6d136adf_c0a469e6",
      "range": {
        "startLine": 15,
        "startChar": 2,
        "endLine": 15,
        "endChar": 34
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "663962c7_097773ff",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T08:53:20Z",
      "side": 1,
      "message": "Tested also locally E2E and it works as expected:\n- Before the logout/login, the GitHub groups were cached and a new membership was not shown\n- After the logout/login, the GitHub groups cache is evicted and the new membership shows up",
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c8803ac_5367df00",
        "filename": "github-plugin/src/main/java/com/googlesource/gerrit/plugins/github/filters/GitHubGroupCacheRefreshFilter.java",
        "patchSetId": 4
      },
      "lineNbr": 66,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-09T16:19:30Z",
      "side": 1,
      "message": "nit: would you mind extracting this to a private method? it\u0027s hard to find where the `if` statement ends.",
      "range": {
        "startLine": 63,
        "startChar": 15,
        "endLine": 66,
        "endChar": 20
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a02e2ff1_376f779d",
        "filename": "github-plugin/src/main/java/com/googlesource/gerrit/plugins/github/filters/GitHubGroupCacheRefreshFilter.java",
        "patchSetId": 4
      },
      "lineNbr": 66,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T16:54:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4c8803ac_5367df00",
      "range": {
        "startLine": 63,
        "startChar": 15,
        "endLine": 66,
        "endChar": 20
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2374efaf_f8c3c0d8",
        "filename": "github-plugin/src/test/java/com/googlesource/gerrit/plugins/github/FakeHttpServletRequest.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-09T16:19:30Z",
      "side": 1,
      "message": "nit: I\u0027d rather use mocks instead of those lengthy fake implementations.",
      "range": {
        "startLine": 54,
        "startChar": 13,
        "endLine": 54,
        "endChar": 35
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7ad4c0bc_22a6b381",
        "filename": "github-plugin/src/test/java/com/googlesource/gerrit/plugins/github/FakeHttpServletRequest.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T16:54:37Z",
      "side": 1,
      "message": "Actually these are copied from Gerrit Code Review where we rather use fake implementations than mocks :-)\n\nI\u0027ve aligned the approach to what we do in Gerrit. It would be actually useful to extract those FakeHttpServletRequest/Response classes and put them into the plugin api testing framework.\n\nPossibly a follow-up change on Gerrit master?",
      "parentUuid": "2374efaf_f8c3c0d8",
      "range": {
        "startLine": 54,
        "startChar": 13,
        "endLine": 54,
        "endChar": 35
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a8f7a88_f9a4542f",
        "filename": "github-plugin/src/test/java/com/googlesource/gerrit/plugins/github/FakeHttpServletRequest.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-09T17:36:27Z",
      "side": 1,
      "message": "This sounds like such a common use case to have a _fake_ HTTP request/response, that there _must_ be a library that already has those fakes.",
      "parentUuid": "7ad4c0bc_22a6b381",
      "range": {
        "startLine": 54,
        "startChar": 13,
        "endLine": 54,
        "endChar": 35
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "45b433fd_0967258a",
        "filename": "github-plugin/src/test/java/com/googlesource/gerrit/plugins/github/FakeHttpServletRequest.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T19:33:04Z",
      "side": 1,
      "message": "Let\u0027s see if Id30d5f465df4 goes though in stable-3.9 ðŸ˜Š\nIf yes, I will be able to remove these two classes.",
      "parentUuid": "7a8f7a88_f9a4542f",
      "range": {
        "startLine": 54,
        "startChar": 13,
        "endLine": 54,
        "endChar": 35
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "61f76bbe_d918e0f9",
        "filename": "github-plugin/src/test/java/com/googlesource/gerrit/plugins/github/FakeHttpServletRequest.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T21:44:06Z",
      "side": 1,
      "message": "Addressed in the follow-up change Id86945fced, which needs to wait for tomorrow\u0027s v3.9.0-rc4.",
      "parentUuid": "45b433fd_0967258a",
      "range": {
        "startLine": 54,
        "startChar": 13,
        "endLine": 54,
        "endChar": 35
      },
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b099d486_d83eb613",
        "filename": "github-plugin/src/test/java/com/googlesource/gerrit/plugins/github/GitHubGroupCacheRefreshFilterTest.java",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-09T16:19:30Z",
      "side": 1,
      "message": "nit: this is a common _initialization_ code, it can be moved to `setUp` method",
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e85afdce_a7b8e3c9",
        "filename": "github-plugin/src/test/java/com/googlesource/gerrit/plugins/github/GitHubGroupCacheRefreshFilterTest.java",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-09T16:54:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b099d486_d83eb613",
      "revId": "5bd8b47b620063b510fc88b533fee8b440cee5be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}