{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f544c0de_e0696de8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 43
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-25T18:36:11Z",
      "side": 1,
      "message": "nit: wrap long line",
      "range": {
        "startLine": 9,
        "startChar": 52,
        "endLine": 9,
        "endChar": 79
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26177ec0_56848b85",
        "filename": "/COMMIT_MSG",
        "patchSetId": 43
      },
      "lineNbr": 10,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-25T18:36:11Z",
      "side": 1,
      "message": "nit: wrap long line",
      "range": {
        "startLine": 10,
        "startChar": 70,
        "endLine": 10,
        "endChar": 75
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bb40962_21db72a5",
        "filename": "README.md",
        "patchSetId": 43
      },
      "lineNbr": 159,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-25T18:36:11Z",
      "side": 1,
      "message": "Wrap long lines in all new section added.",
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30481b7b_4a1e3432",
        "filename": "README.md",
        "patchSetId": 43
      },
      "lineNbr": 163,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-25T18:36:11Z",
      "side": 1,
      "message": "Can you explain the rationale or give pointers?\nThe culprit here is that GitHub OAuth allows only 1 domain the redirection URLs allowed.",
      "range": {
        "startLine": 163,
        "startChar": 0,
        "endLine": 163,
        "endChar": 17
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13fd5303_b33d11de",
        "filename": "README.md",
        "patchSetId": 43
      },
      "lineNbr": 163,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-08-29T10:25:48Z",
      "side": 1,
      "message": "Definitively it needs improvement. Do you think it would add some value if we provide some sequence diagrams, before the fix and after the fix?",
      "parentUuid": "30481b7b_4a1e3432",
      "range": {
        "startLine": 163,
        "startChar": 0,
        "endLine": 163,
        "endChar": 17
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f9ceacb_f0208ce3",
        "filename": "README.md",
        "patchSetId": 43
      },
      "lineNbr": 163,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-29T11:39:15Z",
      "side": 1,
      "message": "This is the README.md, so we just need to explain how it works now.",
      "parentUuid": "13fd5303_b33d11de",
      "range": {
        "startLine": 163,
        "startChar": 0,
        "endLine": 163,
        "endChar": 17
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db2fcf6e_80920fc1",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 65,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-25T18:36:11Z",
      "side": 1,
      "message": "What if the optional is empty? I believe we need to manage like the header was empty?",
      "range": {
        "startLine": 65,
        "startChar": 58,
        "endLine": 65,
        "endChar": 64
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eda68261_3033a7c2",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 65,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-08-29T10:25:48Z",
      "side": 1,
      "message": "In the L64:\n```\n    if (!Strings.isNullOrEmpty(forwardedHost)) {\n```\nThat guard ensures that `forwardedHost` header is neither `null` nor `empty string` therefore:\n```\n      String clientHost \u003d extractClientHost(forwardedHost).get();\n```\nwill return a `Some value`",
      "parentUuid": "db2fcf6e_80920fc1",
      "range": {
        "startLine": 65,
        "startChar": 58,
        "endLine": 65,
        "endChar": 64
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e173c9c_059a6f48",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 65,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-29T11:39:15Z",
      "side": 1,
      "message": "My bad, apologies for the redundant comment.",
      "parentUuid": "eda68261_3033a7c2",
      "range": {
        "startLine": 65,
        "startChar": 58,
        "endLine": 65,
        "endChar": 64
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "428cbf57_37a80285",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 72,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-25T18:36:11Z",
      "side": 1,
      "message": "Do we really need to redirect in this case? Why not simply going to end at L88?",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 15
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bca4f94e_e83f4a5d",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 72,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-08-29T10:25:48Z",
      "side": 1,
      "message": "I think that you raised a good point. Your suggestion ends in a `404` provided by some `filter/servlet downstream`. Would you agree that at least we would have to log an error message raising that the flow of `/login-oauth` needs to have:\n```\ncanonicalWebUrl.getHost() !\u003d forwardedHost\n```\n\nI am happy to have a conversation about that.",
      "parentUuid": "428cbf57_37a80285",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 15
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18246a0b_c76d0d76",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 72,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-08-29T11:39:15Z",
      "side": 1,
      "message": "You are correct: in this case we need consider the `/login-oauth` as a simple `/login` and therefore redirect.",
      "parentUuid": "bca4f94e_e83f4a5d",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 15
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91a9babe_704f8167",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 72,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-08-29T12:17:31Z",
      "side": 1,
      "message": "I guess is up to us how we want to define the flow. Honestly, your idea makes sense to me because simplify the flow and make it clear: that filter is used in the multisite login flow, if canonical web url host is different that X-Forwarded-Host means that there is an error of configuration so we log it and chain downstream.",
      "parentUuid": "18246a0b_c76d0d76",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 15
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68586448_1c131c6d",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/LoginOAuthRedirectionFilter.java",
        "patchSetId": 43
      },
      "lineNbr": 72,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-08-29T12:47:35Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "91a9babe_704f8167",
      "range": {
        "startLine": 67,
        "startChar": 0,
        "endLine": 72,
        "endChar": 15
      },
      "revId": "897f03f00d814f9519b9daf9fffb15c30ad11462",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}