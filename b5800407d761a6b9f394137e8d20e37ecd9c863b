{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c52b8d67_23c60723",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "Should we have a follow up that instead of using `/dev/zero` file (which is not really secure) would actually create a file under `[gerrit_site]/etc/` with auto-generated key? In that case default configuration would be a secure one out-fo-the-box? @luca @tony WDYT?",
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8c5fc23_db0161ea",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 22
      },
      "lineNbr": 109,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-09-21T23:13:42Z",
      "side": 1,
      "message": "Unneeded `else`",
      "range": {
        "startLine": 109,
        "startChar": 8,
        "endLine": 109,
        "endChar": 14
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc8606b5_ff246bfc",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 22
      },
      "lineNbr": 109,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e8c5fc23_db0161ea",
      "range": {
        "startLine": 109,
        "startChar": 8,
        "endLine": 109,
        "endChar": 14
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8120392_04d4366b",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/GitHubOAuthConfigTest.java",
        "patchSetId": 22
      },
      "lineNbr": 1,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "missing copyright header",
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "847730d4_00121b84",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/GitHubOAuthConfigTest.java",
        "patchSetId": 22
      },
      "lineNbr": 1,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Good catch!",
      "parentUuid": "f8120392_04d4366b",
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "130b995c_a8d97f78",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 43,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2022-09-21T23:13:42Z",
      "side": 1,
      "message": "This can be instantiated in the `setUp()` with:\n```\n    canonicalWebUrl \u003d Guice.createInjector(\n            new AbstractModule() {\n              @Override\n              protected void configure() {\n                bind(String.class).annotatedWith(com.google.gerrit.server.config.CanonicalWebUrl.class).toProvider(Providers.of(null));\n              }\n            }\n    ).getInstance(CanonicalWebUrl.class);\n```",
      "range": {
        "startLine": 43,
        "startChar": 2,
        "endLine": 43,
        "endChar": 40
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "078b1b77_4f176a15",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 43,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Nice one, thanks luca this does the trick and we can remove mockito now.",
      "parentUuid": "130b995c_a8d97f78",
      "range": {
        "startLine": 43,
        "startChar": 2,
        "endLine": 43,
        "endChar": 40
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa450323_228e6629",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 43,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:51Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "078b1b77_4f176a15",
      "range": {
        "startLine": 43,
        "startChar": 2,
        "endLine": 43,
        "endChar": 40
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8506d440_73d4e492",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 69,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "if `encrypt` and `decrypt` were just returning input values it would still be `true`, right?",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 81
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16ac11a3_e5ea06e3",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 69,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Yes, this test just ensures that whatever is encrypted using `encrypt()`, can be decrypted using `decrypt()`.\n\nDetails on _how_ the encryption works is covered by other tests.\n\nDo you think this is not worth it?",
      "parentUuid": "8506d440_73d4e492",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 81
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f831815_6b2434fb",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 69,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T12:19:03Z",
      "side": 1,
      "message": "I miss the confirmation that whatever was produced at `encrypt` is not the same as input e.g.:\n\n```\nString encrypted \u003d objectUnderTest.encrypt(someOauthToken);\nassertNotEqules(encrypted, someOauthToken);\nassertEquals(objectUnderTest.decrupt(encrypted), someOauthToken);\n```\n\nIt is for you to decide if that is covered in other tests and this could be removed or it should be added to this one ;)",
      "parentUuid": "16ac11a3_e5ea06e3",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 81
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "97e5fd51_9c671d83",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 69,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T16:50:23Z",
      "side": 1,
      "message": "\u003e I miss the confirmation that whatever was produced at `encrypt` is not the same as input e.g.:\n\u003e \n\u003e ```\n\u003e String encrypted \u003d objectUnderTest.encrypt(someOauthToken);\n\u003e assertNotEqules(encrypted, someOauthToken);\n\u003e assertEquals(objectUnderTest.decrupt(encrypted), someOauthToken);\n\u003e ```\n\u003e \n\u003e It is for you to decide if that is covered in other tests and this could be removed or it should be added to this one ;)\n\nFor me this was already covered at L95, but I guess not explicitly enough.\nAdded here as you suggested.",
      "parentUuid": "0f831815_6b2434fb",
      "range": {
        "startLine": 69,
        "startChar": 17,
        "endLine": 69,
        "endChar": 81
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7411869f_62c7b3ab",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 83,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "nit: it would be easier to follow if `prefix` was explicitly tested for existence as it is intended in the test description, at present it is verified by `dropKeyId` not failing during execution...",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 83,
        "endChar": 57
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1951cbd9_56990c66",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 83,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7411869f_62c7b3ab",
      "range": {
        "startLine": 81,
        "startChar": 4,
        "endLine": 83,
        "endChar": 57
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b3e53a2_a5f17a83",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 101,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "what if `plainTextToken` contains `:` string? Is that a real case for GitHub OAuth tokens to contain `:` in body?\nAnswering myself - according to [1] it cannot ;)\n\n[1] https://github.blog/changelog/2021-03-31-authentication-token-format-updates-are-generally-available/",
      "range": {
        "startLine": 98,
        "startChar": 2,
        "endLine": 101,
        "endChar": 3
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71dd2375_7aeeb9c4",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 144,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "nit: it is in test already",
      "range": {
        "startLine": 144,
        "startChar": 2,
        "endLine": 144,
        "endChar": 20
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f017ccfd_181ab52b",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 144,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "71dd2375_7aeeb9c4",
      "range": {
        "startLine": 144,
        "startChar": 2,
        "endLine": 144,
        "endChar": 20
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fb4f563_0b626f2e",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 145,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "can be private",
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6e724108_130ec85a",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 145,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6fb4f563_0b626f2e",
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e34e7861_67e44c4c",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 149,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "nit: it is in test already",
      "range": {
        "startLine": 149,
        "startChar": 2,
        "endLine": 149,
        "endChar": 20
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "079261e4_bcedde13",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 149,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "e34e7861_67e44c4c",
      "range": {
        "startLine": 149,
        "startChar": 2,
        "endLine": 149,
        "endChar": 20
      },
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71520114_d800bcf8",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 150,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-22T06:50:47Z",
      "side": 1,
      "message": "can be private",
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7be42759_799d3ad1",
        "filename": "github-oauth/src/test/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipherTest.java",
        "patchSetId": 22
      },
      "lineNbr": 150,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-22T07:59:34Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "71520114_d800bcf8",
      "revId": "b5800407d761a6b9f394137e8d20e37ecd9c863b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}