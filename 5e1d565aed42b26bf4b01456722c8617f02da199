{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "21500e37_fdaec294",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 14
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-20T19:20:56Z",
      "side": 1,
      "message": "I haven\u0027t looked at tests yet.",
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5d05e24_ed4b3824",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubOAuthConfig.java",
        "patchSetId": 14
      },
      "lineNbr": 151,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-20T19:20:56Z",
      "side": 1,
      "message": "one cannot process stream that was already collected as this is a terminal operation e.g.\n\n```\n    Stream\u003cString\u003e fooStream \u003d Stream.of(\"foo\", \"bar\");\n    fooStream.collect(Collectors.toSet());\n    fooStream\n        .filter(n -\u003e n.equals(\"foo\"))\n        .findFirst()\n        .orElseThrow(() -\u003e new IllegalStateException(\"\u0027foo\u0027 should be there\"));\n```\n\nfails with:\n```\nException in thread \"main\" java.lang.IllegalStateException: stream has already been operated upon or closed\n```\n\nIOW it works cuz `keyConfigMap` is empty ;)",
      "range": {
        "startLine": 136,
        "startChar": 3,
        "endLine": 151,
        "endChar": 50
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "126b54e8_5d87e2b1",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubOAuthConfig.java",
        "patchSetId": 14
      },
      "lineNbr": 151,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-21T07:53:24Z",
      "side": 1,
      "message": "really good point @geminica.programs@gmail.com!\nIt seems I have done one refactor too many and factored out the stream as well.\n\nLet me fix that, thanks for pointing out!",
      "parentUuid": "c5d05e24_ed4b3824",
      "range": {
        "startLine": 136,
        "startChar": 3,
        "endLine": 151,
        "endChar": 50
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb630e90_7ef5b5d3",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 80,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-20T19:20:56Z",
      "side": 1,
      "message": "nit: invalid format?",
      "range": {
        "startLine": 80,
        "startChar": 83,
        "endLine": 80,
        "endChar": 91
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75e887e1_07a491fc",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 80,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-21T07:53:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cb630e90_7ef5b5d3",
      "range": {
        "startLine": 80,
        "startChar": 83,
        "endLine": 80,
        "endChar": 91
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4c5def9_d6da190f",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 97,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-20T19:20:56Z",
      "side": 1,
      "message": "it seems that more efficient would be to return `pair` of `Cipher` and `encrypted string` from `getCipherFor` so that `[take|drop]Prefix` methods wouldn\u0027t have to be called multiple times on the same input one after another for a `decrypt` operation being able to perform. WDYT?",
      "range": {
        "startLine": 94,
        "startChar": 6,
        "endLine": 97,
        "endChar": 34
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0b748a14_56300958",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 97,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-21T07:53:24Z",
      "side": 1,
      "message": "I see what you mean, but I\u0027d prefer to keep the API cleaner and for getCipherFor to only return a cipher, as the name suggests, unless you feel strongly about it.\n\nThese are not expensive operations and they are not performed often, so I think in this case polluting the interface to do early optimization would be unnecessary.",
      "parentUuid": "a4c5def9_d6da190f",
      "range": {
        "startLine": 94,
        "startChar": 6,
        "endLine": 97,
        "endChar": 34
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe3a88aa_511c030c",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 131,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-20T19:20:56Z",
      "side": 1,
      "message": "nit: would probably rephrased it to sth more precise e.g.\n\n`The encrypted key is malformed. It is expected to contain 2 tokens (prefix and key value) whereas it contains %d tokens.`\n\nor sth similar ;)",
      "range": {
        "startLine": 131,
        "startChar": 25,
        "endLine": 131,
        "endChar": 71
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cda8a2ad_3afb3eb0",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 131,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-21T07:53:24Z",
      "side": 1,
      "message": "Rephrased along your suggestion",
      "parentUuid": "fe3a88aa_511c030c",
      "range": {
        "startLine": 131,
        "startChar": 25,
        "endLine": 131,
        "endChar": 71
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3a2f75d_1903dcab",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 152,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2022-09-20T19:20:56Z",
      "side": 1,
      "message": "`takePrefix` is called two times for the same input. How about putting it into a variable?",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 152,
        "endChar": 5
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf220a8b_a2d5a2b2",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/OAuthTokenCipher.java",
        "patchSetId": 14
      },
      "lineNbr": 152,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2022-09-21T07:53:24Z",
      "side": 1,
      "message": "I explicitly left it as-is, to be honest ðŸ˜Š\nIt is called multiple times _only_ in the case of an error, in which case the call is terminal, as an exception will be thrown.\n\nI thought the code would be leaner this way (one less line/assigment).\n\nI can see both arguments though, let me factor it out.",
      "parentUuid": "b3a2f75d_1903dcab",
      "range": {
        "startLine": 147,
        "startChar": 4,
        "endLine": 152,
        "endChar": 5
      },
      "revId": "5e1d565aed42b26bf4b01456722c8617f02da199",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}