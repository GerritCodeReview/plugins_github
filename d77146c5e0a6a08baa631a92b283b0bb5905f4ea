{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cdd5291d_ad2ee3ea",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T11:45:29Z",
      "side": 1,
      "message": "There are no tests. I guess this is more a E2E scenario.",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f01c02d6_09853567",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-14T12:11:58Z",
      "side": 1,
      "message": "yes, it\u0027s more of E2E scenario, as for testing we\u0027d need to replay some of the GitHub REST API responses.",
      "parentUuid": "cdd5291d_ad2ee3ea",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b40d4ac3_c03dabd8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T12:42:49Z",
      "side": 1,
      "message": "For visibility, I think is good to explain the E2E tests that you have done. In that way some readers can give you feedback.",
      "parentUuid": "f01c02d6_09853567",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ad38c79_6179829e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-14T13:07:03Z",
      "side": 1,
      "message": "sure, I just copied the scopes from GerritHub, and created a new account with the _Reviewer_ scope. This resulted in two or three `HttpException` being thrown during the login, plus one more when GitHub \u003e Repositories page from the navigation bar was accessed. Also logging out and in resulted in a few `HttpException`s.\n\nAfter this change, no `HttpException` is logged during the above operations.",
      "parentUuid": "b40d4ac3_c03dabd8",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93d7a8f0_0e402da4",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 84,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T11:45:29Z",
      "side": 1,
      "message": "Personally I find brittle to do checking based on strings/substrings defined in a third party library.\n\nI have tried to find the substring `You need at least` in https://github.com/hub4j/github-api/tree/github-api-1.316 and I was not able to do it. Where is it coming from?",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d3bcd2af_9e6a6baa",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 84,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-14T12:11:58Z",
      "side": 1,
      "message": "This message is not coming from the library, but from the GitHub REST API, see the 6th commend on the linked issue.\n\nI opted in for the \"contains\" check as it feels like all of the REST API exceptions share the same exception type. Didn\u0027t want to swallow all of the REST API exceptions here.",
      "parentUuid": "93d7a8f0_0e402da4",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92a269c2_66a1efbb",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 84,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T12:41:39Z",
      "side": 1,
      "message": "\u003e This message is not coming from the library, but from the GitHub REST API\n\nSo if I understand correctly, if Github Rest API changes the message, this logic would fail. If that is the case I think we should try to find another alternative.\nObviously this is personal opinion.",
      "parentUuid": "d3bcd2af_9e6a6baa",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2df1b0ce_4db21a11",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 84,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-14T13:07:03Z",
      "side": 1,
      "message": "\u003e So if I understand correctly, if Github Rest API changes the message, this logic would fail. If that is the case I think we should try to find another alternative.\n\nFor that reason, I opted only for a partial match and skipped the part about the exact required permissions (as those may change over time). This is a REST API, and part of the API are errors and messages, so they _should_ be stable, any change should require another version of the API to be published.\n\nIMO, that\u0027s the best and least invasive thing that we can do right now.\n\nA proper way of dealing with it would be to not call the APIs that we know will fail. But this is a completely different approach compared to the overall strategy in the GitHub` plugin. That would require more refactoring which IMO is out of scope of the bug fix.",
      "parentUuid": "92a269c2_66a1efbb",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cac01bff_cf98624c",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 84,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T13:59:10Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "2df1b0ce_4db21a11",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f533be1c_0d63a041",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T12:01:55Z",
      "side": 1,
      "message": "nit: you could rise an exception containing `org.kohsuke.github.HttpException` and providing another message with more context so when the stack trace is printed in the logs the reader can have a better context.",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "809307ba_94e08ec7",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-14T12:11:58Z",
      "side": 1,
      "message": "IMO this would be an overkill, to define a new exception type to throw it once just to have a better message in the logs. I believe that the message from `HttpException` is good enough (after all it\u0027s just forwarding the message from the official REST API), also wrapping in another exception would make the log statement even longer.",
      "parentUuid": "f533be1c_0d63a041",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb775a17_46fec4d8",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T12:41:39Z",
      "side": 1,
      "message": "I did not mean to create a new one. Maybe you could use another type of Exception in scope that represents this use case. I tend to hide 3rd party libraries exceptions and encapsulate in others that represent my use case. In any case It is a matter of taste I think.",
      "parentUuid": "809307ba_94e08ec7",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ed21531_8b016deb",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-12-14T13:07:03Z",
      "side": 1,
      "message": "sure, I\u0027m all for the consistency in the codebase if that\u0027s how this is handled I can wrap it in some kind of _permission_ exception.",
      "parentUuid": "bb775a17_46fec4d8",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73de897d_2a2f743f",
        "filename": "github-oauth/src/main/java/com/googlesource/gerrit/plugins/github/oauth/GitHubLogin.java",
        "patchSetId": 1
      },
      "lineNbr": 85,
      "author": {
        "id": 1149185
      },
      "writtenOn": "2023-12-14T13:59:10Z",
      "side": 1,
      "message": "At the end of the day is your call. I am interested to see what the others say about that.",
      "parentUuid": "9ed21531_8b016deb",
      "revId": "d77146c5e0a6a08baa631a92b283b0bb5905f4ea",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}